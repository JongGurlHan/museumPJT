<html xmlns:th="http://www.thymeleaf.org">

<div th:replace="layout/header" :: menu />

<!--프로필 섹션-->
<section class="profile">
  <!--유저정보 컨테이너-->
  <div class="profileContainer" th:object="${dto.user}">

    <!--유저이미지-->
    <div class="profile-left">
      <div class="profile-img-wrap story-border"
           onclick="popup('.modal-image')">

        <form id="userProfileImageForm">
          <input type="file" name="profileImageFile" style="display: none;"
                 id="userProfileImageInput" />
        </form>

<!--        <img class="profile-image" src="/image/${dto.user.profileImageUrl}"  th:src="@{|/image/${dto.user.profileImageUrl}|}"-->
       <!-- <img class="profile-image" src="/image/${dto.user.profileImageUrl}"  th:src="@{|https://instaclonepjt-bucket.s3.ap-northeast-2.amazonaws.com/${dto.user.profileImageUrl}|}"
             onerror="this.src='/images/person.png'" id="userProfileImage" />-->
      </div>
    </div>
    <!--유저이미지end-->

    <!--유저정보 및 사진등록 팔로우하기-->
    <div class="profile-right">
      <div class="name-group">
        <h2 th:text="*{name}">유저이름</h2>

<!--        <div th:if="${dto.pageOwnerState == true}">-->
<!--          <button class="cta" onclick="location.href='/image/upload'">사진등록</button>-->
<!--        </div>-->
<!--        <div th:if ="${dto.pageOwnerState == false}">-->

<!--          <div th:if="${dto.followState == true}">-->
<!--            <button class="cta blue" th:attr="onclick =|toggleSubscribe('${dto.user.id}', this)|">팔로우취소</button>-->

<!--            &lt;!&ndash;            <button class="cta blue" th:onclick="toggleSubscribe([[${dto.user.id}]], this)">팔로우 취소</button>&ndash;&gt;-->
<!--          </div>-->
<!--          <div th:if="${dto.followState == false}">-->
<!--            <button class="cta blue" th:attr="onclick =|toggleSubscribe('${dto.user.id}', this)|">팔로우</button>-->

<!--            &lt;!&ndash;            <button class="cta" th:onclick="toggleSubscribe([[${dto.user.id}]],this)">팔로우</button>&ndash;&gt;-->
<!--          </div>-->

<!--        </div>-->

<!--        <button class="modi" onclick="popup('.modal-info')">-->
<!--          <i class="fas fa-cog"></i>-->
<!--        </button>-->
<!--      </div>-->

<!--      <div class="subscribe">-->
<!--        <ul>-->
<!--          <li><a href=""> 게시물<span th:text="${dto.imageCount}">3</span>-->
<!--          </a></li>-->
<!--          <script  th:inline="javascript">-->
<!--            /*<![CDATA[*/-->
<!--            var id = "[[${dto.user.id}]]";-->
<!--            /*]]>*/-->
<!--          </script>-->

<!--          <li>-->
<!--            <a href="javascript:subscribeInfoModalOpen(id);">-->
<!--              팔로우정보<span th:text="${dto.followCount} ">2</span>-->
<!--            </a>-->
<!--          </li>-->


<!--        </ul>-->
<!--      </div>-->
<!--      <div class="state">-->
<!--        <h4 th:text="*{bio}">자기 소개입니다.</h4>-->
<!--        <h4 th:text="*{website}">https://github.com/codingspecialist</h4>-->
<!--      </div>-->
    </div>
    <!--유저정보 및 사진등록 팔로우하기-->

  </div>
</section>

<!--게시물컨섹션-->
<section id="tab-content">
  <!--게시물컨컨테이너-->
  <div class="profileContainer">
    <!--그냥 감싸는 div (지우면이미지커짐)-->
    <div id="tab-1-content" class="tab-content-item show">
      <!--게시물컨 그리드배열-->
      <div class="tab-1-content-inner">

        <!--이미지들-->
<!--        <tr th:each="image: ${dto.user.images}">-->
<!--          <div class="img-box">-->
<!--            <a href="">-->
<!--              <div th:text="${image.id}">123</div>-->

<!--              <img src="/4cbe394f-e018-4dd0-a509-f0724efe41c4_dog2.jpg"-->
<!--              th:src="@{|https://instaclonepjt-bucket.s3.ap-northeast-2.amazonaws.com/${image.postImageUrl}|}"/>-->
<!--&lt;!&ndash;              th:src="@{|/image/${image.postImageUrl}|}"/>&ndash;&gt;-->

<!--&lt;!&ndash;                   th:src="|${@environment.getProperty('file.path')}${image.postImageUrl}|"/>&ndash;&gt;-->
<!--&lt;!&ndash;                   th:src="${@environment.getProperty('file.path')} + @{${image.postImageUrl}}"/>&ndash;&gt;-->

<!--            </a>-->
<!--            <div class="comment">-->
<!--              <a href="#" class=""> <i class="fas fa-heart"></i><span th:text="${image.likeCount}">999</span>-->
<!--&lt;!&ndash;              <a href="#" class=""> <i class="fas fa-heart"></i><span th:text="${image.likes.size()}">999</span>로 해도된다.&ndash;&gt;-->
<!--              </a>-->
<!--            </div>-->
<!--            <div th:if="${dto.pageOwnerState == true}">-->
<!--&lt;!&ndash;              <button type="button"  class="btn btn-sm btn-danger" onClick="imageDelete('${image.id'})">삭제</button>&ndash;&gt;-->

<!--              <button class="btn btn-sm btn-danger" th:attr="onclick =|imageDelete('${image.id}')|">삭제</button>-->


<!--            </div>-->

<!--          </div>-->


<!--        </tr>-->
        <!--이미지들end-->

      </div>
    </div>
  </div>
</section>

<!--로그아웃, 회원정보변경 모달-->
<div class="modal-info" onclick="modalInfo()">
  <div class="modal">
    <button onclick="location.href='/user/1/update'">회원정보 변경</button>
    <button onclick="location.href='/logout'">로그아웃</button>
    <button onclick="closePopup('.modal-info')">취소</button>
  </div>
</div>
<!--로그아웃, 회원정보변경 모달 end-->


<!--프로필사진 바꾸기 모달-->
<div class="modal-image" onclick="modalImage()">
<!--  <div class="modal">-->
<!--    <p>프로필 사진 바꾸기</p>-->
<!--    <button onclick="profileImageUpload()" th:onclick="|profileImageUpload('${dto.user.id}','${#authentication.principal.user.id}')|">사진 업로드</button>-->
<!--    <button onclick="closePopup('.modal-image')">취소</button>-->
<!--  </div>-->
</div>

<!--프로필사진 바꾸기 모달end-->

<div class="modal-subscribe">
  <div class="subscribe">
    <div class="subscribe-header">
      <span>팔로우정보</span>
      <button onclick="modalClose()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="subscribe-list" id="subscribeModalList">

    </div>
  </div>
</div>


<script src="/js/profile.js"></script>

<div th:replace="layout/footer" :: footer />
